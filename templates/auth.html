{% extends "base.html" %}

{% block content %}
<div class="auth-page-wrapper">
    <div class="auth-overlay-dark"></div>

    <div class="auth-card-container {% if panel == 'register' %}right-panel-active{% endif %}" id="container">
        
        <div class="form-container sign-up-container">
            <form method="POST" action="{{ url_for('register') }}" id="registerForm">
                <h1 class="gold">Create Account</h1>
                <div class="auth-icon-box">
                    <i class="fa-solid fa-pizza-slice animate__animated animate__pulse animate__infinite"></i>
                </div>
                <p class="auth-subtitle">Daftar untuk akses kemewahan Thury Pizza</p>
                
                <div class="input-modern-group">
                    <input type="text" name="username" placeholder="Username" required />
                    <input type="email" name="email" placeholder="Email Address" required />
                    
                    <input type="password" name="password" id="reg_password" placeholder="Password" required />
                    
                    <input type="password" id="confirm_password" placeholder="Confirm Password" required />
                    
                    <small id="password_msg" style="margin-top: -10px; font-weight: 600; font-size: 0.8rem; height: 15px;"></small>
                </div>
                
                <button type="submit" class="btn-auth-main" id="regBtn">JOIN NOW</button>
                <button type="button" class="mobile-only-btn" onclick="toggleMobile()">Sudah ada akun? Masuk</button>
            </form>
        </div>

        <div class="form-container sign-in-container">
            <form method="POST" action="{{ url_for('login') }}">
                <h1 class="gold">Sign In</h1>
                <div class="auth-icon-box">
                    <i class="fa-solid fa-user-astronaut"></i>
                </div>
                <p class="auth-subtitle">Gunakan akun member eksklusif Anda</p>
                
                <div class="input-modern-group">
                    <input type="email" name="email" placeholder="Email Address" required />
                    <input type="password" name="password" placeholder="Password" required />
                </div>
                
                <a href="#" class="forgot-link">Lupa Password?</a>
                <button type="submit" class="btn-auth-main">SIGN IN</button>
                <button type="button" class="mobile-only-btn" onclick="toggleMobile()">Belum ada Akun? Daftar</button>
            </form>
        </div>

        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>Selamat Datang!</h1>
                    <p>Kembali ke meja Anda dan nikmati pizza favorit hari ini.</p>
                    <button class="btn-ghost-luxury" id="signInBtn">SIGN IN</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h1>Halo, Sahabat!</h1>
                    <p>Daftar sekarang dan nikmati promo spesial khusus member baru.</p>
                    <button class="btn-ghost-luxury" id="signUpBtn">SIGN UP</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const container = document.getElementById('container');
    const signUpBtn = document.getElementById('signUpBtn');
    const signInBtn = document.getElementById('signInBtn');
    const reg_pass = document.getElementById('reg_password');
    const conf_pass = document.getElementById('confirm_password');
    const msg = document.getElementById('password_msg');
    const btnSubmit = document.getElementById('regBtn');

    // Toggle Desktop
    signUpBtn.addEventListener('click', () => container.classList.add("right-panel-active"));
    signInBtn.addEventListener('click', () => container.classList.remove("right-panel-active"));

    // Toggle Mobile
    function toggleMobile() {
        container.classList.toggle("right-panel-active");
    }

    // Real-time Confirm Password Validation
    function validate() {
        if (conf_pass.value === "") {
            msg.innerHTML = "";
            conf_pass.style.borderColor = "rgba(255,255,255,0.1)";
            btnSubmit.disabled = false;
            return;
        }

        if (reg_pass.value === conf_pass.value) {
            msg.style.color = "#2ecc71";
            msg.innerHTML = '<i class="fa-solid fa-check-circle"></i> Password cocok';
            conf_pass.style.borderColor = "#2ecc71";
            btnSubmit.disabled = false;
            btnSubmit.style.opacity = "1";
        } else {
            msg.style.color = "#e74c3c";
            msg.innerHTML = '<i class="fa-solid fa-times-circle"></i> Password tidak cocok!';
            conf_pass.style.borderColor = "#e74c3c";
            btnSubmit.disabled = true;
            btnSubmit.style.opacity = "0.5";
        }
    }

    reg_pass.addEventListener('keyup', validate);
    conf_pass.addEventListener('keyup', validate);
</script>

<style>
    .auth-page-wrapper { min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #080808; padding: 20px; }
    .auth-card-container { background: #121212; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.8); position: relative; overflow: hidden; width: 1000px; max-width: 100%; min-height: 650px; border: 1px solid rgba(255,255,255,0.05); }
    .form-container { position: absolute; top: 0; height: 100%; transition: all 0.6s ease-in-out; }
    .sign-in-container { left: 0; width: 50%; z-index: 2; }
    .sign-up-container { left: 0; width: 50%; opacity: 0; z-index: 1; }
    .right-panel-active .sign-in-container { transform: translateX(100%); opacity: 0; }
    .right-panel-active .sign-up-container { transform: translateX(100%); opacity: 1; z-index: 5; }
    form { background: #121212; display: flex; flex-direction: column; padding: 0 50px; height: 100%; justify-content: center; align-items: center; text-align: center; }
    .input-modern-group { width: 100%; display: flex; flex-direction: column; gap: 15px; }
    input { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; color: #fff; width: 100%; outline: none; }
    input:focus { border-color: var(--accent); background: rgba(255,200,0,0.05); }
    .btn-auth-main { background: var(--accent); color: #000; font-weight: 800; border: none; padding: 16px; border-radius: 50px; width: 100%; margin-top: 20px; cursor: pointer; transition: 0.3s; }
    .btn-auth-main:hover { background: #fff; transform: translateY(-3px); }
    .overlay-container { position: absolute; top: 0; left: 50%; width: 50%; height: 100%; overflow: hidden; transition: transform 0.6s ease-in-out; z-index: 100; }
    .right-panel-active .overlay-container { transform: translateX(-100%); }
    .overlay { background: linear-gradient(135deg, #b8860b 0%, var(--accent) 100%); color: #000; position: relative; left: -100%; height: 100%; width: 200%; transform: translateX(0); transition: transform 0.6s ease-in-out; }
    .right-panel-active .overlay { transform: translateX(50%); }
    .overlay-panel { position: absolute; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 0 40px; text-align: center; top: 0; height: 100%; width: 50%; }
    .btn-ghost-luxury { background: transparent; border: 2px solid #000; color: #000; padding: 12px 45px; border-radius: 50px; font-weight: 800; cursor: pointer; }
    .forgot-link { color: #666; font-size: 0.8rem; margin-top: 10px; align-self: flex-end; }
    .mobile-only-btn { display: none; background: none; border: none; color: var(--accent); margin-top: 20px; font-weight: 600; }

    @media (max-width: 768px) {
        .overlay-container { display: none; }
        .form-container { width: 100%; }
        .sign-up-container { display: none; }
        .right-panel-active .sign-in-container { display: none; }
        .right-panel-active .sign-up-container { display: flex; position: relative; transform: none; }
        .mobile-only-btn { display: block; }
    }
</style>
{% endblock %}