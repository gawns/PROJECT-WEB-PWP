{% extends "base.html" %}

{% block content %}
<div class="hero-full" style="min-height: 100vh; display: flex; align-items: center; background-color: #0a0a0a; padding: 80px 0;">
    <div class="hero-bg-overlay"></div>
    
    <div class="container-fluid" style="position: relative; z-index: 2; padding: 0 5%;">
        <div class="row align-items-stretch">
            
            <div class="col-md-6 d-flex">
                <div class="glass-panel w-100" style="background: rgba(20, 20, 20, 0.9); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); padding: 40px; border-radius: 20px; display: flex; flex-direction: column; justify-content: center;">
                    <div class="mb-4">
                        <span class="gold-tag">ADMIN PANEL</span>
                        <h2 style="color: #fff; font-weight: 800; letter-spacing: 1px;">PENGATURAN MENU</h2>
                        <div style="width: 60px; height: 4px; background: var(--accent); margin-top: 10px;"></div>
                    </div>

                    <form action="/admin/edit/{{ pizza.id }}" method="POST">
                        <div class="form-group mb-3">
                            <label class="form-label" style="color: var(--accent);">NAMA PIZZA</label>
                            <input type="text" name="nama" class="input-modern" value="{{ pizza.nama }}" required id="input-nama" style="border-radius: 12px;">
                        </div>
                        
                        <div class="form-group mb-3">
                            <label class="form-label" style="color: var(--accent);">DESKRIPSI RASA</label>
                            <textarea name="deskripsi" class="input-modern" rows="4" required id="input-desc" style="border-radius: 12px; resize: none;">{{ pizza.deskripsi }}</textarea>
                        </div>

                        <div class="row">
                            <div class="col-sm-6 mb-3">
                                <label class="form-label" style="color: var(--accent);">HARGA (Rp)</label>
                                <input type="number" name="harga" class="input-modern" value="{{ pizza.harga }}" required id="input-harga" style="border-radius: 12px;">
                            </div>
                            <div class="col-sm-6 mb-3">
                                <label class="form-label" style="color: var(--accent);">KATEGORI</label>
                                <input type="text" class="input-modern" value="Premium Signature" readonly style="border-radius: 12px; background: rgba(255,255,255,0.05); color: #888;">
                            </div>
                        </div>

                        <div class="form-group mb-5">
                            <label class="form-label" style="color: var(--accent);">URL GAMBAR</label>
                            <input type="text" name="gambar_url" class="input-modern" value="{{ pizza.gambar_url }}" required id="input-url" style="border-radius: 12px;">
                        </div>

                        <div style="display: flex; gap: 20px;">
                            <button type="submit" class="btn-gold" style="flex: 1; padding: 18px; font-size: 1rem; border-radius: 15px;">
                                <i class="fa-solid fa-check-circle"></i> SIMPAN PERUBAHAN
                            </button>
                            <a href="/admin" class="btn-outline" style="flex: 0.5; text-align: center; display: flex; align-items: center; justify-content: center; border-radius: 15px;">
                                BATAL
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <div class="col-md-6 d-flex align-items: center; justify-content: center;">
                <div style="width: 100%; max-width: 450px; padding: 20px;">
                    <div class="text-center mb-4">
                        <span class="gold-tag" style="opacity: 0.6;">Tampilan di Website</span>
                    </div>
                    
                    <div class="menu-card" style="border-color: var(--accent); box-shadow: 0 20px 50px rgba(0,0,0,0.5); border-radius: 25px; overflow: hidden; background: var(--bg-card);">
                        <div style="height: 280px; overflow: hidden;">
                            <img src="{{ pizza.gambar_url }}" alt="Preview" id="preview-img" style="width: 100%; height: 100%; object-fit: cover; transition: 0.5s;">
                        </div>
                        <div class="menu-content" style="padding: 30px;">
                            <h3 id="preview-nama" style="font-size: 1.8rem; margin-bottom: 10px;">{{ pizza.nama }}</h3>
                            <p id="preview-desc" style="font-size: 1rem; color: var(--text-gray); min-height: 60px;">{{ pizza.deskripsi }}</p>
                            <div class="menu-price" id="preview-harga" style="font-size: 1.6rem; color: var(--accent); margin: 20px 0;">
                                Rp {{ "{:,.0f}".format(pizza.harga) }}
                            </div>
                            <div class="btn-gold" style="width: 100%; pointer-events: none; opacity: 0.8; border-radius: 12px;">
                                ORDER NOW
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    const inputs = {
        nama: document.getElementById('input-nama'),
        desc: document.getElementById('input-desc'),
        harga: document.getElementById('input-harga'),
        url: document.getElementById('input-url')
    };

    const previews = {
        nama: document.getElementById('preview-nama'),
        desc: document.getElementById('preview-desc'),
        harga: document.getElementById('preview-harga'),
        img: document.getElementById('preview-img')
    };

    inputs.nama.oninput = () => previews.nama.innerText = inputs.nama.value;
    inputs.desc.oninput = () => previews.desc.innerText = inputs.desc.value;
    inputs.url.oninput = () => previews.img.src = inputs.url.value;
    inputs.harga.oninput = () => {
        let val = parseInt(inputs.harga.value) || 0;
        previews.harga.innerText = 'Rp ' + val.toLocaleString('id-ID');
    };
</script>
{% endblock %}